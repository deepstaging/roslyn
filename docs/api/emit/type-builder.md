# TypeBuilder

Create type declarations.

> **See also:** [Emit Overview](index.md) | [MethodBuilder](method-builder.md) | [PropertyBuilder](property-builder.md)

## Factory Methods

| Method | Description |
|--------|-------------|
| `Class(string name)` | Create a class |
| `Interface(string name)` | Create an interface |
| `Struct(string name)` | Create a struct |
| `Record(string name)` | Create a record |
| `Parse(string signature)` | Parse from signature (e.g., `"public partial class MyClass"`) |

## Namespace & Usings

```csharp
TypeBuilder
    .Class("MyClass")
    .InNamespace("MyApp.Domain")
    .AddUsing("System")
    .AddUsings("System.Collections.Generic", "System.Linq")
```

## Accessibility & Modifiers

```csharp
TypeBuilder
    .Class("MyClass")
    .WithAccessibility(Accessibility.Public)
    .AsStatic()
    .AsAbstract()
    .AsSealed()
    .AsPartial()
```

## Interfaces

```csharp
TypeBuilder
    .Class("Repository")
    .Implements("IRepository")
    .Implements("IDisposable", "IAsyncDisposable")

// Conditional interfaces (see Directives for more)
TypeBuilder
    .Struct("UserId")
    .Implements("IEquatable<UserId>")
    .Implements("ISpanFormattable", Directives.Net6OrGreater)
    .Implements("IParsable<UserId>", Directives.Net7OrGreater)
```

## Adding Members

```csharp
// Properties
builder.AddProperty("Name", "string", prop => prop
    .WithAccessibility(Accessibility.Public)
    .WithAutoPropertyAccessors())
builder.AddProperty(propertyBuilder)

// Fields
builder.AddField("_name", "string", field => field
    .WithAccessibility(Accessibility.Private)
    .AsReadonly())
builder.AddField(fieldBuilder)

// Methods
builder.AddMethod("GetName", method => method
    .WithReturnType("string")
    .WithBody(body => body.AddReturn("_name")))
builder.AddMethod(methodBuilder)

// Constructors
builder.AddConstructor(ctor => ctor
    .AddParameter("name", "string")
    .WithBody(body => body.AddStatement("_name = name;")))
builder.AddConstructor(constructorBuilder)

// Primary constructors (records, C# 12+)
builder.WithPrimaryConstructor(ctor => ctor
    .AddParameter("name", "string"))

// Nested types
builder.AddNestedType("Inner", inner => inner
    .WithAccessibility(Accessibility.Private))
builder.AddNestedType(nestedTypeBuilder)

// Operators (see also: OperatorBuilder in other-builders.md)
builder.AddEqualityOperator("left.Equals(right)")
builder.AddInequalityOperator("!left.Equals(right)")
builder.AddOperator(OperatorBuilder.LessThan("MyType")
    .WithExpressionBody("left.Value < right.Value"))
builder.AddOperator(operatorBuilder)

// Conversion operators (see also: ConversionOperatorBuilder in other-builders.md)
builder.AddExplicitConversion("Guid", op => op
    .WithExpressionBody("new UserId(value)"))
builder.AddExplicitConversionTo("Guid", op => op
    .WithExpressionBody("value.Value"))
builder.AddImplicitConversion("string", op => op
    .WithExpressionBody("new Name(value)"))
builder.AddImplicitConversionTo("string", op => op
    .WithExpressionBody("value.Value"))
builder.AddConversionOperator(conversionOperatorBuilder)
```

## Attributes

```csharp
builder.WithAttribute("Serializable")
builder.WithAttribute("JsonProperty", attr => attr
    .WithArgument("\"name\"")
    .WithNamedArgument("Required", "true"))
builder.WithAttribute(attributeBuilder)
```

## XML Documentation

```csharp
builder.WithXmlDoc("Represents a customer entity.")

builder.WithXmlDoc(doc => doc
    .Summary("Represents a customer entity.")
    .Remarks("This class is generated by the source generator."))

builder.WithXmlDoc(existingXmlDocumentation)
```

## Properties

```csharp
builder.Name    // string — the type name
builder.Kind    // TypeKind — class, interface, struct, etc.
```

## Emit

```csharp
OptionalEmit result = builder.Emit();
OptionalEmit result = builder.Emit(EmitOptions.Default);
```
